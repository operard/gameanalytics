-- DISCORD SCHEMA

DROP TABLE "DISCORD_SERVER" ;

CREATE TABLE "DISCORD_SERVER" 
   (	
    "ID" NUMBER(30), 
	"DESCR" VARCHAR2(255), 
	"DTIME" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT PK_DISCORD_SERVER PRIMARY KEY (ID)
   ) ;

GRANT INSERT, SELECT, UPDATE, DELETE ON "DISCORD"."DISCORD_SERVER" TO "PSADMIN";

DROP TABLE "DISCORD_CHANNEL" ;

CREATE TABLE "DISCORD_CHANNEL" 
   (	
    "ID" NUMBER(30), 
	"CATEGORY_ID" NUMBER(30) DEFAULT 0, 
    "SERVER_ID" NUMBER(30), 
	"NAME" VARCHAR2(255), 
	"DESCR" VARCHAR2(255), 
	"CTYPE" INTEGER DEFAULT 0,  -- 0: TEXT, 1: FORUM, 2: VOICE, 3: CATEGORY, 4: DM, 5: GROUP 
	"DTIME" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT PK_DISCORD_CHANNEL PRIMARY KEY (ID)
   ) ;

GRANT INSERT, SELECT, UPDATE, DELETE ON "DISCORD"."DISCORD_CHANNEL" TO "PSADMIN";

DROP TABLE DISCORD_MESSAGES ;

CREATE TABLE "DISCORD_MESSAGES" 
   (	
    "ID" NUMBER(30), 
	"CHANNEL_ID" NUMBER(30) DEFAULT 0, 
	"AUTHORID" NUMBER(30) DEFAULT 0, 
	"AUTHOR" VARCHAR2(4000), 
	"CREATED_AT" TIMESTAMP (6), 
	"CONTENT" VARCHAR2(4000), 
	"LANGUAGE" VARCHAR2(255), 
	"ATTACHMENTS" VARCHAR2(4000), 
	"REACTIONS" VARCHAR2(4000), 
	"SENTIMENT_LABEL" VARCHAR2(255), 
	"SENTIMENT" FLOAT, 
	"HOW_POSITIVE" FLOAT, 
	"HOW_NEUTRAL" FLOAT, 
	"HOW_NEGATIVE" FLOAT, 
	"DTIME" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT PK_DISCORD_MESSAGES PRIMARY KEY (ID)
   ) ;
   
COMMIT;


-- 

CREATE TABLE "DISCORD_REACTIONS" (
ID NUMBER(30) GENERATED BY DEFAULT AS IDENTITY
(START WITH 1
INCREMENT BY 1
CYCLE 
MAXVALUE 999999999999 
CACHE 200),
MSGID NUMBER(30),
EMOJI VARCHAR2(255),
EMOJI_TRANSLATED VARCHAR2(255),
COUNTER INTEGER,
"DTIME" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
CONSTRAINT PK_DISCORD_REACTIONS PRIMARY KEY (ID)
);

COMMIT;

create index IDX_DISCORD_REACTIONS on "DISCORD_REACTIONS" ( MSGID );

COMMIT;
